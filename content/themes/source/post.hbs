{{!< default}}
{{!-- The tag above means: insert everything in this file into the body of the default.hbs template --}}

{{#post}}

<main class="gh-main">

    <article class="gh-article {{post_class}}">

        <header class="gh-article-header gh-canvas">

            {{#if primary_tag}}
                <a class="gh-article-tag" href="{{primary_tag.url}}">{{primary_tag.name}}</a>
            {{/if}}
            <h1 class="gh-article-title is-title">{{title}}</h1>
            {{#if custom_excerpt}}
                <p class="gh-article-excerpt is-body">{{custom_excerpt}}</p>
            {{/if}}

            {{#if @custom.show_post_metadata}}
            <div class="gh-article-meta">
                <div class="gh-article-author-image instapaper_ignore">
                    {{#foreach authors}}
                        {{#if profile_image}}
                            <a href="{{url}}">
                                <img class="author-profile-image" src="{{img_url profile_image size="xs"}}" alt="{{name}}">
                            </a>
                        {{else}}
                            <a href="{{url}}">{{> "icons/avatar"}}</a>
                        {{/if}}
                    {{/foreach}}
                </div>
                <div class="gh-article-meta-wrapper">
                    <h4 class="gh-article-author-name">{{authors}}</h4>
                    <div class="gh-article-meta-content">
                        <time class="gh-article-meta-date" datetime="{{date format="YYYY-MM-DD"}}">{{date format="DD MMM YYYY"}}</time>
                        {{#if reading_time}}
                            <span class="gh-article-meta-length"><span class="bull">â€”</span> {{reading_time}}</span>
                        {{/if}}
                    </div>
                </div>
            </div>
            {{/if}}

            {{> "feature-image"}}

        </header>

        {{!-- Horizontal Subscribe Section --}}
        {{#unless @member}}
            <section class="gh-horizontal-subscribe gh-canvas" style="margin-bottom: 60px;">
                <div class="gh-horizontal-subscribe-inner" style="grid-column: wide;">
                    <div class="gh-horizontal-subscribe-content">
                        <h3 class="gh-horizontal-subscribe-title">Get marketing insights that matter.</h3>
                        <p class="gh-horizontal-subscribe-description">Join thousands of brand leaders getting strategic insights weekly.</p>
                    </div>
                    <form class="gh-form gh-horizontal-subscribe-form" data-members-form>
                        <input class="gh-form-input gh-horizontal-subscribe-input" id="post-horizontal-subscribe-email" name="email" type="email" placeholder="jamie@example.com" required data-members-email>
                        <button class="gh-button gh-horizontal-subscribe-button" type="submit" aria-label="Subscribe">
                            <span>Subscribe</span>
                            {{> "icons/loader"}}
                            {{> "icons/checkmark"}}
                        </button>
                        <p data-members-error class="gh-horizontal-subscribe-error"></p>
                        <p data-members-success class="gh-horizontal-subscribe-success" style="display: none;">Great! Check your inbox and click the link to confirm your subscription.</p>
                    </form>
                </div>
            </section>
        {{/unless}}

        <section class="gh-content gh-canvas is-body{{#if @custom.enable_drop_caps_on_posts}} drop-cap{{/if}}">
            {{content}}
        </section>

    </article>

    {{!-- Table of Contents Component --}}
    {{> "table-of-contents"}}

    {{#if comments}}
        <div class="gh-comments gh-canvas">
            {{comments}}
        </div>
    {{/if}}

</main>

{{/post}}

{{#if @custom.show_related_articles}}
    {{#get "posts" include="authors" filter="id:-{{post.id}}" limit="4" as |next|}}
        {{#if next}}
            <section class="gh-container is-grid gh-outer">
                <div class="gh-container-inner gh-inner">
                    <h2 class="gh-container-title">Read more</h2>
                    <div class="gh-feed">
                        {{#foreach next}}
                            {{> "post-card" lazyLoad=true}}
                        {{/foreach}}
                    </div>
                </div>
            </section>
        {{/if}}
    {{/get}}
{{/if}}

{{!-- Join the Experts CTA Section --}}
{{#unless @member}}
    <section style="display: block !important; background: var(--color-lighter-gray); padding: 100px 0; margin: 60px 0 0 0; width: 100vw; margin-left: calc(-50vw + 50%);">
        <div style="max-width: 1200px; margin: 0 auto; text-align: center; padding: 0 40px;">
            <div style="max-width: 800px; margin: 0 auto 48px;">
                <h2 style="font-size: 4.8rem; font-weight: 700; margin-bottom: 20px; line-height: 1.1;">Join the Experts</h2>
                <p style="font-size: 2rem; line-height: 1.4; opacity: 0.9;">Marketing insights with meaning, strategy with soul. Join a community of brand leaders and changemakers who demand more than surface-level takes.</p>
            </div>
            <div style="max-width: 500px; margin: 0 auto;">
                <form class="gh-form" data-members-form style="display: flex; gap: 0; width: 100%;">
                    <input class="gh-form-input" id="post-cta-email" name="email" type="email" placeholder="jamie@example.com" required data-members-email style="flex: 1; padding: 16px 20px; border: 1px solid #e1e5e9; border-radius: 0; font-size: 1.6rem; height: 56px; box-sizing: border-box; border-right: none; position: static;">
                    <button class="gh-button" type="submit" aria-label="Subscribe" style="padding: 16px 32px; background: var(--ghost-accent-color); color: white; border: 1px solid var(--ghost-accent-color); border-radius: 0; cursor: pointer; font-size: 1.6rem; font-weight: 600; height: 56px; box-sizing: border-box; width: auto; position: static;">
                        <span>Subscribe</span>
                        {{> "icons/loader"}}
                        {{> "icons/checkmark"}}
                    </button>
                </form>
                <p data-members-error style="color: red; margin-top: 8px; text-align: left;"></p>
                <p data-members-success style="color: green; margin-top: 8px; text-align: left; display: none;">Great! Check your inbox and click the link to confirm your subscription.</p>
            </div>
        </div>
    </section>
{{/unless}}
